# ゲームプレイフロー

ゲームプレイフロー：ゲームの流れを説明し、プレイヤーがゲームを進めるために必要なアクションやタスク、エラーハンドリング方法、ゲームの進行状況を保存する方法などを説明します。

何もない状態から、線路を敷設し、列車を走らせるまでの流れを示す。

- 線路建設
  - 地形によっては橋をかけたり、トンネルを掘って接続する
- 駅建設
  - 停車場所を指定する
  - 旅客を集め、乗せる場所
- 路線設定
  - 停車駅、ホーム番号を設定する
  - 経路については、走行時に自動で決定する
- 車両購入
  - 車両は指定した駅ホームに配置される
- 車両設定
  - 車両を路線に割り当てる
  - 運転開始
  - 正しく運行できるかは、走らせてみないとわからない

## テキストベースUIによる操作

ゲームの性質上、ほぼ確実に操作の対象と操作をセットにして選択する必要がある。選択できる対象には、地形、建物、駅、車両がある。

駅。

```
Station{
    id: "tokyo",
    name: "東京駅",
    length: 10,
    width: 20,
    locate: Point{x: 1, y: 2},
}
```

線路。線(点の集合体)。カーブや勾配には制限がある。

```
Rail{
    line: Line{ points: [Point{x: 1, y: 2, h: 6}, Point{x: 3, y: 4, h: 6}"]},
    track: 2, // 複線
}
```

路線追加。路線は、線路の状況と関係なく設定することができる。運行させたときに無効かはわかる。

```
# id, 駅id:ホーム番号
create route(chuo, "tokyo:12,11", "kanda:1", "ochanomizu:4", "kanda:2")
```

## 車両移動のルール

線路レベルじゃなくて、マクロな路線にフォーカスしたものにする。信号制御はない。

- 車両はレール上だけを移動できる
- 単線の入れ違いは駅だけで行える。ほかの箇所では平面交差しない
- 信号による予約区間は自動で設定され、先に入った方が予約する

## 建築物のルール

- 建築物は住所として1つの点を持つ。同時に、縦横高さを持つ。同じ空間に重ねることはできない

## 制限

空間的な制限をどう定義するか。
